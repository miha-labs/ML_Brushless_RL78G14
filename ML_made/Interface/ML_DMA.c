/* -----------------------------------------------------------------------------
	include
----------------------------------------------------------------------------- */
#include	"ML_DMA.h"
#include	"../../src/r_cg_dtc.h"

/* -----------------------------------------------------------------------------
	Local Macro
----------------------------------------------------------------------------- */


/* -----------------------------------------------------------------------------
	Local Variable
----------------------------------------------------------------------------- */
#pragma address dtc_buf = 0x0FA000U
uint16_t __near dtc_buf[DMA_BUF_SIZE];


/* -----------------------------------------------------------------------------
	local Structure
----------------------------------------------------------------------------- */



/* -----------------------------------------------------------------------------
	local function
----------------------------------------------------------------------------- */



/* -----------------------------------------------------------------------------
	private function
----------------------------------------------------------------------------- */
static void clearBuf(void)
{
	for (size_t i = 0; i < DMA_BUF_SIZE; i++)
	{
		dtc_buf[i] = 0;
	}
}


/* -----------------------------------------------------------------------------
	public function
----------------------------------------------------------------------------- */
void DMA_Startup(void)
{
	clearBuf();
	R_DTCD0_Start();
}


void DMA_Start(void)
{
	R_DTCD0_Start();
}


void DMA_Stop(void)
{
	R_DTCD0_Stop();
}


void DMA_GetArray(uint16_t *ary)
{
	for (size_t i = 0; i < DMA_BUF_SIZE; i++)
	{
		ary[i] = dtc_buf[i];
	}
}